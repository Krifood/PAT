# 飞参解析工具PAT

# 引言
本文件是对综合软件飞参解析工具ParamAnalysisTool的需求描述与分解。
目标是实现一款飞参解析工具软件，可以对记载日志内容进行解析与展示，目的是方便设计人员对飞机飞行过程中记录的各项原始数据进行分析，校对设计功能正确性。

# 概述
飞参解析工具软件旨在对飞行原始数据解析与展示，满足设计人员对原始数据校对飞行实际飞行状态是否符合预期的需求。在满足已有飞行参数距离解析功能的基础上，需要支持对自定义飞参条目格式自定义，包括对飞参数据条目的扩展，包括新增、调整、删除等操作，支持多类型飞参数据格式的解析。

此软件开发过程中几乎无其他外部依赖，使用时仅依赖原始飞参数据以及与之对应的飞参数据解析格式。

当前设计软件系统包包括一下模块：
目录管理模块、格式文件管理模块、数据文件管理模块、数据解析功能模块、数据展示功能模块。

格式加载模块、数据加载模块、解析模块、展示模块、格式模板设计模块、格式管理模块、数据管理模块、菜单/目录管理模块、属性配置模块。

# 功能模块拆分
## 目录管理

- 提供顶层工具菜单栏
- 提供右键菜单
- 提供图像合并功能

## 格式文件管理

- 支持加载格式文件
- 支持对解析格式文件的新建、打开、编辑、保存

### 格式文件内容

#### 格式文件的组、子组与信号

1. 格式文件应当支持分组解析，格式如下，格式文件的分组应当支持递归查找，但是实际信号为member类，所有的组、子组概念只作为信号归类概念，不参与实际解析。

期望的格式文件内容可能如下：

```bash
group1 {
    member1,
    member2,
    member3
},
group2 {
    subgroup1 {
        member1,
        member2,
    }
},
memberA,
memberB,
```

2. 格式文件的属性，对于组和子组，只有组名与组说明对于信号：包含信号名，信号解析格式，信号说明，解析的时间轴比例尺等信息，其中只有解析格式与时间轴比例尺参与解析，其他均只有展示辅助提供分析的作用。



## 数据文件管理

- 支持加载数据文件
- 支持数据文件的导入

## 数据解析功能

- 支持数据实时解析能力
- 支持将数据文件按格式文件规则进行解析
- 支持更改格式文件后重解析
- 支持一当前格式文件解析其他数据文件
- 支持数据的极值统计
- 支持异常数据检查功能
- 支持多组数据文件、多组格式文件独立匹配独立解析

## 数据展示功能

- 支持多组数据同时展示
- 支持多组数据合并展示
- 提供辅助线功能
- 同组数据时间轴统一
- 支持数据图表缩放
- 支持图像框选聚焦能力

### 页面布局

1. 主页面分为四部分：菜单栏、信号区、画布展示区、辅助显示栏。
菜单页面在顶层，不应占据过多高度，提供文件导入等功能；
信号区在菜单页面之下，界面左侧以边栏形式存在；
画布展示区在信号区的右侧，画布区需要支持子画布展示，子画布即实际信号的展示区。
辅助显示栏，可以显示当前项目的一些辅助内容，如加载解析点数，解析状态等辅助信息
2. 各个子画布的展示比例应当总是相同的，共享主画布展示区，随着展示的子画布增加各个子画布的展示比例需要调整，但是存在最小限制，即高度不可小于主画布高度的1/6；当一屏不能容下子画布时，主画布需要提供滑动菜单边栏，允许拖动显示不同的子画布内容。
3. 支持子画布的拖拽与合并，支持从信号区拖拽到子画布中合并展示的功能，合并展示时纵轴比例尺以当前画布中总轴幅值最大的情况展示。
4. 所有子画布共享横轴，当缩放时，所有子画布的横轴展示比例一起缩放。因为数据文件可能非常大，取点个数也可能非常多，所以应当允许横轴子画布内部拖拽游移展示中心，提供单凭最大显示横轴点数可设置功能。

### 游标与辅助功能

1. 因为所有子画布共享时间轴，当游标移动到子画布上时，需要一条平行于纵轴的辅助线用来强调数据与数据之间的关系
2. 纵轴的辅助线与各个子图的交点的幅值是我们比较关心的，应当在交点处显示这个点的横、纵坐标值
3. 应当支持子画布中框选后细节放大功能，放大时所有子图时序应当一起缩放。
4. 支持游标菜单，在子画布上时支持一键复原展示比例。


### 信号区功能

1. 左侧信号区展示格式文件中的数据内容，包括组/子组/信号名，组/子组/信号说明，组/子组/信号时间比例尺内容，其中组、子组、信号之间应存在缩进强调递进关系，支持组、子组的折叠。
2. 支持按照组、子组、信号三级粒度开启/关闭子图展示。
3. 允许从信号区拖拽组/子组/信号到展示区来开启信号数据展示功能，当组/子组被整体拖到展示区空白处时，默认分别展开成独立的子画布，当被整体拖拽到某个子图表上时，视为整体与此图表合并展示。

### 

1. 所有信号共享时间轴（可以保证所有信号的原始数据横轴粒度为统计拍数， 允许各个信号的统计周期不同，所以时间轴应当由统计拍数与当前信号的时间轴比例尺得到）
2. 