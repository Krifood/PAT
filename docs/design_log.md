# 设计日志

记录设计思路、决策与阶段目标，便于协作与追溯。

## 记录原则
- 尽量小步快记：每次关键决策、里程碑、方案取舍都要补充。
- 明确版本/日期，指出影响范围（核心解析、GUI、构建、测试等）。
- 若有未定问题，列出待决事项，后续补上结论。

## 2026-01-06 初始规划
- 背景：飞参解析，格式用 JSON 描述，数据为 bin/dat 时序数值，需折线图展示，体积尽量小，后续希望把核心迁移到 Web 端。
- 架构取向：核心解析库与 GUI 解耦；核心仅依赖标准库 + RapidJSON + fmt + spdlog，保留 Emscripten 兼容性。
- GUI 方案：预留两种构建选项——Qt（全功能）与 ImGui+ImPlot（轻量）。默认优先实现轻量方案以控制体积。
- 数据处理：按时间轴流式解析，建立轻量索引，支持极值统计、对齐、多格式并行解析；后处理可插拔。
- 里程碑：
  - M1 CLI 核心：格式加载/校验、二进制解析、极值统计、CSV 导出、单元测试。
  - M2 GUI 轻量版：数据加载、曲线绘制、缩放/框选、导出。
  - M3 工程化：项目文件、批量解析、多格式并行、异常检测可视化。
  - M4 Web 迁移预研：Emscripten 编译核心，稳定 C API/FFI。
  - M5 发布：打包脚本、CI 产物。
- 待决事项：
  - JSON 格式描述具体字段：类型/字节序/单位/尺度/时间戳规则/校验（CRC/校验和）。
  - GUI 方案最终选型（Qt vs ImGui），是否需要脚本扩展（Python/Lua）。
  - 是否需要压缩日志支持（zlib）与多线程解析/绘图并发策略。

## 2026-01-06 决策更新
- GUI 选型确认：采用 Qt Widgets + Qt Charts（功能适度、易发布），不再同时维护 ImGui 方案。
- 依赖策略：默认不使用包管理器；依赖尽量使用 Qt 自带能力（含 JSON 解析、日志）；如需额外库再评估手动引入。
- 开发起步：准备 CMake 骨架，划分核心解析与 Qt UI，先实现最小可用的格式加载 + 数据读取 + 简单折线图展示。
- 工程骨架：新增 CMakeLists（Qt6/Qt5兼容）、core（格式/数据解析）与 ui（Qt Widgets + Qt Charts）目录，形成基础可编译入口。
